(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d225a65"],{e4ff:function(e,a,t){"use strict";t.r(a);var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("form",{attrs:{action:"#"},on:{submit:function(a){return a.preventDefault(),e.addEmployee(a)}}},[t("div",{staticClass:"c-modalLogin"},[t("div",{staticClass:"form-row"},[t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"login-input"}},[e._v("Имя пользователя")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.employee.Login,expression:"employee.Login"}],staticClass:"form-control",class:{"is-invalid":null!=e.validationErrors["Login"]},attrs:{name:"Login",type:"text",required:"",id:"login-input"},domProps:{value:e.employee.Login},on:{input:function(a){a.target.composing||e.$set(e.employee,"Login",a.target.value)}}}),null!=e.validationErrors["Login"]?t("div",{staticClass:"invalid-feedback"},[e._v(" "+e._s(e.validationErrors["Login"][0])+" ")]):e._e()])]),t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"password-input"}},[e._v("Пароль")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.employee.Password,expression:"employee.Password"}],staticClass:"form-control",class:{"is-invalid":null!=e.validationErrors["Password"]},attrs:{type:"password",required:"",name:"Password",id:"password-input"},domProps:{value:e.employee.Password},on:{input:function(a){a.target.composing||e.$set(e.employee,"Password",a.target.value)}}}),null!=e.validationErrors["Password"]?t("div",{staticClass:"invalid-feedback"},[e._v(" "+e._s(e.validationErrors["Password"][0])+" ")]):e._e()])])]),t("div",{staticClass:"form-row"},[t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"first-name-input"}},[e._v("Имя")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.employee.FirstName,expression:"employee.FirstName"}],staticClass:"form-control",class:{"is-invalid":null!=e.validationErrors["FirstName"]},attrs:{name:"FirstName",required:"",type:"text",id:"first-name-input"},domProps:{value:e.employee.FirstName},on:{input:function(a){a.target.composing||e.$set(e.employee,"FirstName",a.target.value)}}}),null!=e.validationErrors["FirstName"]?t("div",{staticClass:"invalid-feedback"},[e._v(" "+e._s(e.validationErrors["FirstName"][0])+" ")]):e._e()])]),t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"last-name-input"}},[e._v("Фамилия")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.employee.LastName,expression:"employee.LastName"}],staticClass:"form-control",class:{"is-invalid":null!=e.validationErrors["LastName"]},attrs:{name:"LastName",required:"",type:"text",id:"last-name-input"},domProps:{value:e.employee.LastName},on:{input:function(a){a.target.composing||e.$set(e.employee,"LastName",a.target.value)}}}),null!=e.validationErrors["LastName"]?t("div",{staticClass:"invalid-feedback"},[e._v(" "+e._s(e.validationErrors["LastName"][0])+" ")]):e._e()])])]),t("div",{staticClass:"form-row"},[t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"middle-name-input"}},[e._v("Отчество")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.employee.MiddleName,expression:"employee.MiddleName"}],staticClass:"form-control",class:{"is-invalid":null!=e.validationErrors["MiddleName"]},attrs:{name:"MiddleName",type:"text",id:"middle-name-input"},domProps:{value:e.employee.MiddleName},on:{input:function(a){a.target.composing||e.$set(e.employee,"MiddleName",a.target.value)}}}),null!=e.validationErrors["MiddleName"]?t("div",{staticClass:"invalid-feedback"},[e._v(" "+e._s(e.validationErrors["MiddleName"][0])+" ")]):e._e()])]),t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"phone-input"}},[e._v("Телефон")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.employee.Phone,expression:"employee.Phone"}],staticClass:"form-control",class:{"is-invalid":null!=e.validationErrors["Phone"]},attrs:{name:"Phone",required:"",type:"text",id:"phone-input",placeholder:"+7 (xxx) xxx-xx-xx"},domProps:{value:e.employee.Phone},on:{input:function(a){a.target.composing||e.$set(e.employee,"Phone",a.target.value)}}}),null!=e.validationErrors["Phone"]?t("div",{staticClass:"invalid-feedback"},[e._v(" "+e._s(e.validationErrors["Phone"][0])+" ")]):e._e()])])]),t("div",{staticClass:"form-group"},[t("label",[e._v("Пол")]),t("br"),t("div",{staticClass:"custom-control custom-radio custom-control-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.employee.Gender,expression:"employee.Gender"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"FemaleGender",name:"Gender",value:"Female"},domProps:{checked:e._q(e.employee.Gender,"Female")},on:{change:function(a){return e.$set(e.employee,"Gender","Female")}}}),t("label",{staticClass:"custom-control-label",attrs:{for:"FemaleGender"}},[e._v("Женский")])]),t("div",{staticClass:"custom-control custom-radio custom-control-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.employee.Gender,expression:"employee.Gender"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"MaleGender",name:"Gender",value:"Male"},domProps:{checked:e._q(e.employee.Gender,"Male")},on:{change:function(a){return e.$set(e.employee,"Gender","Male")}}}),t("label",{staticClass:"custom-control-label",attrs:{for:"MaleGender"}},[e._v("Мужской")])]),null!=e.validationErrors["Gender"]?t("div",{staticClass:"invalid-feedback"},[e._v(" "+e._s(e.validationErrors["Gender"][0])+" ")]):e._e()]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"name"}},[e._v("Должность")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.employee.PositionId,expression:"employee.PositionId"}],staticClass:"custom-select",class:{"is-invalid":null!=e.validationErrors["PositionId"]},on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.employee,"PositionId",a.target.multiple?t:t[0])}}},[t("option",{domProps:{value:null}},[e._v("Выберите должность")]),e._l(e.positions,(function(a){return t("option",{key:a.id,domProps:{value:a.id}},[e._v(e._s(a.name))])}))],2),null!=e.validationErrors["PositionId"]?t("div",{staticClass:"invalid-feedback"},[e._v(" "+e._s(e.validationErrors["PositionId"][0])+" ")]):e._e()]),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"birthdate-input"}},[e._v("Дата рождения")]),t("datepicker",{attrs:{name:"Birthdate",format:"yyyy-MM-dd","input-class":null!=e.validationErrors["Birthdate"]?"is-invalid":"","monday-first":!0,"bootstrap-styling":!0,"disabled-dates":e.birthdateRange,language:e.ruLanguage},model:{value:e.employee.Birthdate,callback:function(a){e.$set(e.employee,"Birthdate",a)},expression:"employee.Birthdate"}}),null!=e.validationErrors["Birthdate"]?t("div",{staticClass:"invalid-feedback"},[e._v(" "+e._s(e.validationErrors["Birthdate"][0])+" ")]):e._e()],1),t("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[e._v("Сохранить")]),t("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:e.hideModal}},[e._v("Отменить")])])])},s=[],i=(t("4160"),t("fb6a"),t("b64b"),t("159b"),t("5530")),r=t("2f62"),l=t("fa33"),n=t("2430"),d={name:"AddEmployee",components:{Datepicker:l["a"]},data:function(){return{birthdateRange:{from:new Date(2005,12,30),to:new Date(1940,1,1)},ruLanguage:n["ru"],positions:[],employee:{},validationErrors:[]}},methods:Object(i["a"])(Object(i["a"])({},Object(r["b"])(["hideModal"])),{},{addEmployee:function(){var e=this;this.validationErrors=[];var a=new FormData;Object.keys(this.employee).forEach((function(t){if("Birthdate"===t&&e.employee[t]instanceof Date)a.append(t,e.employee[t].toISOString());else if("Gender"===t&&null!=e.employee[t]){var o="Male"==e.employee[t]?1:0;a.append("Gender",o)}else a.append(t,e.employee[t])})),window.axios.post("/employees",a).then((function(a){if(!a.data.success)throw new Error("Сотрудник не был создан");var t=a.data.payload;Object.keys(t).forEach((function(e){var a=e[0].toUpperCase()+e.slice(1);t[a]=t[e],delete t[e]})),e.$store.commit("addEmployee",t),e.hideModal()})).catch((function(a){if(null!=a.response)if(422===a.response.status)e.validationErrors=a.response.data.payload,e.$notify({group:"main",title:"Отправлены некорректные данные",text:"Пожалуйста, проверьте введенные данные ещё раз",type:"error"});else{var t="string"===typeof a.response.data.payload?a.response.data.payload:"Пожалуйста, попробуйте позднее";e.$notify({group:"main",title:"Что-то пошло не так",text:t,type:"error"})}else e.$notify({group:"main",title:"Что-то пошло не так",text:a.message,type:"error"})}))}}),created:function(){var e=this;window.axios.get("/positions").then((function(a){e.positions=a.data.payload}))}},m=d,p=t("2877"),c=Object(p["a"])(m,o,s,!1,null,null,null);a["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d225a65.b6d61ac4.js.map